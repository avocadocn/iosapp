ion-view
  ion-header-bar
    a.button.icon.ion-chevron-left(ng-href="{{backUrl}}") &nbsp;返回
    h1.title {{team.name}}
  ion-content
    .team_header
      img.logo(ng-if="team" ng-src="{{STATIC_URL + team.logo}}/45/45")
      //-todo 有bug，滑动有问题，原因未知，可能需要较多时间排查，先搁置
      ion-slide-box
        ion-slide(ng-repeat="photo in team.familyPhotos")
          img.team_family(ng-src="{{STATIC_URL + photo.uri}}/300/160")
    .list.card.team_info
      .item.item-body
        .team_name {{team.name}}
        .team_type {{team.groupType}}
        .start_time 成立时间: {{team.createTime | date:'yyyy-MM-dd'}}
        .team_des 小队简介: {{team.brief}}
        button.button.button-block.button-light.btn_join(prevent-default ng-if="team.hasJoined" ng-click="quitTeam(team._id)") 已加入小队
        button.button.button-block.button-positive.btn_join(prevent-default ng-if="!team.hasJoined" ng-click="joinTeam(team._id)") 立即加入
      .item.tabs
        a.tab-item.btn_upload_photo(ng-href="#/photo_album/list/team/{{team._id}}") 上传照片
        a.tab-item.btn_member(href="#/members/team/{{team._id}}") {{team.memberCount}}名队员
        .tab-item.btn_cp 活动
    .card.team_home_court
      .row
        .col.tab(ng-click="selectHomeCourt(0)") 主场一
        .col.tab(ng-click="selectHomeCourt(1)") 主场二
      .map(ng-repeat="homeCourt in team.homeCourts" ng-if="homeCourtIndex==$index")
        p(ng-cloak ng-if="homeCourt.name&&homeCourt.loc.coordinates.length!==2") {{homeCourt.name}}
        a(ng-cloak ng-if="homeCourt.loc.coordinates.length===2" ng-href="http://mo.amap.com/?q={{homeCourt.loc.coordinates[1]}},{{homeCourt.loc.coordinates[0]}}&name={{homeCourt.name}}" target="_blank")
          img.map_size(ng-src="http://restapi.amap.com/v3/staticmap?location={{homeCourt.loc.coordinates[0]}},{{homeCourt.loc.coordinates[1]}}&zoom=15&size=420*230&markers=mid,,A:{{homeCourt.loc.coordinates[0]}},{{homeCourt.loc.coordinates[1]}}&labels={{homeCourt.name}},2,0,12,0xffffff,0x3498db:{{homeCourt.loc.coordinates[0]}},{{homeCourt.loc.coordinates[1]}}&key=077eff0a89079f77e2893d6735c2f044")
    .card
      ion-scroll(direction="x" scrollbar-x="false")
        img(ng-repeat="leader in team.leaders" ng-src="{{STATIC_URL + leader.photo}}/45/45")
        img(ng-repeat="member in team.members" ng-src="{{STATIC_URL + member.photo}}/45/45")
      a
        span {{team.memberCount}}
        i.icon.ion-chevron-right

    a.list.card.dl_card(ng-repeat="campaign in campaigns" ng-href="#/campaign/detail/{{campaign._id}}")
      .item.item-avatar.dl_card_header
        img.dl_team_logo(ng-if="team.logo" ng-src="{{STATIC_URL + team.logo}}/45/45")
        h2.dl_cp_name {{campaign.theme}}
        p.dl_cp_address 地点: {{campaign.location.name}}
        button.dl_btn_join(ng-click="joinCampaign(campaign._id)" prevent-default) 参加
      .item.item-body.dl_card_body(ng-if="campaign.photo_album.photos.length>0")
        ion-scroll(direction="x" scrollbar-x="false")
          .dl_photo_alb
            img.dl_cp_photo(ng-repeat="photo in campaign.photo_album.photos" ng-src="{{STATIC_URL +photo.uri+'/150/150'}}")
      .item.dl_card_footer
        span.dl_team_name(ng-if="campaign.campaign_unit.length === 1")
          | {{campaign.campaign_unit[0].team.name}}
        span.dl_team_name(ng-if="campaign.campaign_unit.length === 2")
          | {{campaign.campaign_unit[0].team.name}}
          | vs
          | {{campaign.campaign_unit[1].team.name}}
        span 参加人数: {{campaign.members_count}}
        span 讨论: {{campaign.comment_sum}}

