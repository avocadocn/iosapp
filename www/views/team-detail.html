
<ion-view>
  <ion-header-bar><a ng-href="{{backUrl}}" class="button icon ion-chevron-left">&nbsp;返回</a>
    <h1 class="title">{{team.name}}</h1>
  </ion-header-bar>
  <ion-content class="team_page">
    <div class="team_header">
      <ion-slide-box>
        <ion-slide ng-repeat="photo in team.familyPhotos"><img ng-src="{{STATIC_URL + photo.uri}}/320/190" class="team_family"/></ion-slide>
      </ion-slide-box><img ng-if="team" ng-src="{{STATIC_URL + team.logo}}/65/65" class="logo"/>
    </div>
    <div class="card team_info">
      <div class="info_header clearfix">
        <div class="team_name">{{team.name}}</div>
        <div class="team_type">{{team.groupType}}</div>
      </div>
      <div class="info_body">
        <div class="start_time">成立时间: {{team.createTime | date:'yyyy-MM-dd'}}</div>
        <div class="team_des">小队简介:<span ng-if="team.brief" ng-cloak="ng-cloak">{{team.brief}}</span><span ng-if="!team.brief" ng-cloak="ng-cloak">无</span></div>
        <button prevent-default="prevent-default" ng-if="team.hasJoined" ng-click="quitTeam(team._id)" class="btn_joined">已加入小队</button>
        <button prevent-default="prevent-default" ng-if="!team.hasJoined" ng-click="joinTeam(team._id)" class="btn_join">立即加入</button>
      </div>
      <div class="info_footer row"><a ng-href="#/photo_album/list/team/{{team._id}}" class="col btn_upload_photo">上传照片</a><a href="#/members/team/{{team._id}}" class="col btn_member">{{team.memberCount}}名队员</a>
        <div class="col btn_cp">活动</div>
      </div>
    </div>
    <div class="card team_home_court">
      <div class="row">
        <div ng-click="selectHomeCourt(0)" class="col tab">主场一</div>
        <div ng-click="selectHomeCourt(1)" class="col tab">主场二</div>
      </div>
      <div ng-repeat="homeCourt in team.homeCourts" ng-if="homeCourtIndex==$index" class="map">
        <p ng-cloak="ng-cloak" ng-if="homeCourt.name&amp;&amp;homeCourt.loc.coordinates.length!==2">{{homeCourt.name}}</p><a ng-cloak="ng-cloak" ng-if="homeCourt.loc.coordinates.length===2" ng-href="http://mo.amap.com/?q={{homeCourt.loc.coordinates[1]}},{{homeCourt.loc.coordinates[0]}}&amp;name={{homeCourt.name}}" target="_blank"><img ng-src="http://restapi.amap.com/v3/staticmap?location={{homeCourt.loc.coordinates[0]}},{{homeCourt.loc.coordinates[1]}}&amp;zoom=15&amp;size=420*230&amp;markers=mid,,A:{{homeCourt.loc.coordinates[0]}},{{homeCourt.loc.coordinates[1]}}&amp;labels={{homeCourt.name}},2,0,12,0xffffff,0x3498db:{{homeCourt.loc.coordinates[0]}},{{homeCourt.loc.coordinates[1]}}&amp;key=077eff0a89079f77e2893d6735c2f044" class="map_size"/></a>
      </div>
    </div>
    <div class="card">
      <ion-scroll direction="x" scrollbar-x="false"><img ng-repeat="leader in team.leaders" ng-src="{{STATIC_URL + leader.photo}}/45/45"/><img ng-repeat="member in team.members" ng-src="{{STATIC_URL + member.photo}}/45/45"/></ion-scroll><a><span>{{team.memberCount}}</span><i class="icon ion-chevron-right"></i></a>
    </div>
    <campaign-card ng-repeat="campaign in campaigns" campaign="campaign" team="team"></campaign-card>
    <ion-infinite-scroll on-infinite="loadMore()" distance="1%" ng-if="moreDataCanBeLoaded()"></ion-infinite-scroll>
  </ion-content>
</ion-view>