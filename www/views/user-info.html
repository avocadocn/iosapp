
<ion-view class="personal">
  <ion-header-bar><a ng-click="goBack()" class="button icon-left ion-chevron-left">&nbsp;返回</a>
    <h1 class="title">用户信息</h1><a ng-click="showPopover($event)" class="button icon ion-more"></a>
  </ion-header-bar>
  <ion-content>
    <div class="card user_card">
      <div class="item item-avatar"><img ng-if="user" ng-src="{{STATIC_URL + user.photo}}/90/90" prevent-default="prevent-default" photo="user.photo" pswp-id="pswpId" open-photo="open-photo"/>
        <h2>{{user.nickname}}</h2>
        <p ng-cloak="ng-cloak">姓名: {{user.realname || '-'}}</p>
      </div>
      <div ng-cloak="ng-cloak" class="item statistics">
        <div class="row"><a ng-href="#/personal/teams/{{user._id}}" class="col col-33">
            <p class="number">{{user.tids.length}}</p>
            <p class="key">小队</p></a><a ng-href="#/user/{{user._id}}/timeline" class="col col-33">
            <p class="number">{{user.campaignCount}}</p>
            <p class="key">活动</p></a>
          <div class="col col-33">
            <p class="number">{{user.score}}</p>
            <p class="key">积分</p>
          </div>
        </div>
      </div>
      <div class="item">
        <p ng-if="user.introduce" ng-cloak="ng-cloak" class="introduce"><span class="title">简介：</span><span class="content">{{user.introduce}}</span></p>
        <p ng-if="user.department" ng-cloak="ng-cloak">部门：{{user.department.name}}</p>
        <p ng-if="!user.department" ng-cloak="ng-cloak">部门：无</p>
        <p ng-if="user.sex">性别：{{user.sex}}</p>
        <p ng-if="user.birthday" ng-cloak="ng-cloak">生日：{{user.birthday | date:'yyyy-MM-dd'}}</p>
        <p ng-if="constellation">星座：{{constellation}}</p>
        <p ng-cloak="ng-cloak">邮箱：{{user.email}}</p>
        <p ng-cloak="ng-cloak">手机：{{user.phone || '-'}}</p>
        <p ng-if="user.qq">Q Q ：{{user.qq}}</p>
      </div>
      <div class="item tabs"><a ng-href="#/user/{{user._id}}/timeline" class="tab-item">活动足迹</a></div>
    </div>
  </ion-content>
  <div tabindex="-1" role="dialog" aria-hidden="true" id="{{pswpId}}" class="pswp">
    <div class="pswp__bg"></div>
    <div class="pswp__scroll-wrap">
      <div class="pswp__container">
        <div class="pswp__item"></div>
        <div class="pswp__item"></div>
        <div class="pswp__item"></div>
      </div>
      <div class="pswp__ui pswp__ui--hidden">
        <div class="pswp__top-bar">
          <div class="pswp__counter"></div>
          <button title="关闭" class="pswp__button pswp__button--close"></button>
          <button title="放大/缩小" class="pswp__button pswp__button--zoom"></button>
          <div class="pswp__preloader">
            <div class="pswp__preloader__icn">
              <div class="pswp__preloader__cut">
                <div class="pswp__preloader__donut"></div>
              </div>
            </div>
          </div>
        </div>
        <div class="pswp__caption">
          <div class="pswp__caption__center"></div>
        </div>
      </div>
    </div>
  </div>
</ion-view>
<script id="more-popover.html" type="text/ng-template">
  <ion-popover-view class="dl_popover user_more_popover">
    <ion-content class="dl_popover_content">
      <div class="dl_popover_button"><a ng-click="showReportForm()" class="full_parent_link">举报</a></div>
    </ion-content>
  </ion-popover-view>
</script>